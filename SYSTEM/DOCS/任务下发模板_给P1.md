# 发送给 P1 (Nexus) 的任务指令模板

为了应对低智 AI 可能出现的逻辑断层和遗忘问题，我们需要采取**“小步快跑、逐步增量”**的策略。
以下是为你准备的两个阶段的任务指令。你可以直接复制对应的模块发送给 P1 (Nexus)。

---

## 阶段一：最简可行性跑通（MVP 极简 Demo）

**设计目的**：用最小的代码量和最简单的逻辑，验证技术骨架是否能跑通（读取数据 -> 渲染界面 -> 响应点击 -> 切换数据）。不涉及变量和存档，完全杜绝低智 AI 在起步阶段把逻辑写崩溃的风险。

**复制以下内容发送给 P1：**

```markdown
[TO_P1_Nexus]
# 任务目标：安卓端单机文字游戏-基础跑通 (MVP)

## 1. 核心需求
- 目标：开发一个极简的 Android 文本剧情解析 APP。
- 引擎：Android 原生 (Java/Kotlin)。不用第三方游戏引擎。

## 2. 功能边界 (严禁越界)
- **数据流**：读取本地单一的 JSON 文件作为剧情树。
- **剧情体量**：仅需 3 个节点（Start -> 选A到结局1 / 选B到结局2）。
- **界面 (UI)**：
  - 顶部：纯文本 TextView（展示当前剧情）。
  - 底部：动态生成 1~2 个 Button（展示玩家选项）。点击后刷新顶部文本与按钮。
- **排除项**：不需要存档功能，不需要属性变量，不需要多媒体（音效/图片）。

## 3. 期望的输出
请 P1 拆解任务，调度相关 P8/P7 输出：
1. 极简的 `story.json` 数据结构标准。
2. 对应的 Android 核心解析类与 MainActivity 代码。

请开始分发微指令。
```

---

## 阶段二：高难度完整版（非线性网状剧情与状态系统）

**设计目的**：在阶段一的技术骨架得到验证并合入主干后，再引入高难度的**状态机、变量管理和存档读档**。因为有了阶段一的基础，AI 在进行阶段二开发时，只需要关注“变量”和“存档”这两个增量功能，降低了上下文认知负担。

**复制以下内容发送给 P1：**

```markdown
[TO_P1_Nexus]
# 任务目标：安卓端单机文字游戏-完整架构演进 (高难度)

## 1. 核心需求
- 目标：在 MVP 基础上，升级为支持高自由度非线性剧情、状态管理的完整文字游戏引擎。

## 2. 新增核心特性
- **全局状态树与条件判断**：
  - 引入玩家属性变量（如：San值、金币、好感度）和背包物品标记（Flags）。
  - 选项呈现需支持前置条件（例如：必须 `[has_key=true]` 且 `[san_value>50]` 才会显示选项 C）。
- **复合节点行为**：选择某选项后，除了跳转剧情，还需支持修改全局变量（例如扣除 10 点 San 值）。
- **存读档系统 (Save/Load)**：
  - 支持多档位。必须能精确序列化并保存当前所处的 `Node_ID` 以及所有**全局变量状态**，保证读档后逻辑无缝衔接。
- **表现层扩充**：JSON 配置需增加可选字段，支持在特定节点切换背景图片或播放指定音效。

## 3. 期望的输出
请 P1 审慎评估并分阶段拆解：
1. 请 `P8_技术主管` 与 `P8_文案主管` 联合制定支持条件判断和状态修改的 v2 版 JSON 结构。
2. 请 `P8_记忆员` 建立全局状态变量表。
3. 请 `P7` 实现持久化存储（如 SharedPreferences / Room）和进阶的引擎解析器。

请输出架构升级方案并开始分发任务。
```

---

## 阶段三：终极形态（AI 动态赋能与多元宇宙剧本）

**设计目的**：在拥有了坚实的游戏引擎底座后，引入真正拉开差距的核心卖点——**玩家自定义大模型接入**以及**打破题材壁垒的混合世界观**。让游戏从静态的剧情树进化为无限可能的动态沙盒。

**复制以下内容发送给 P1：**

```markdown
[TO_P1_Nexus]
# 任务目标：安卓端单机文字游戏-终极形态演进 (AI化与多元宇宙)

## 1. 核心需求
- 目标：将底层引擎升级为“AI 混合驱动”架构，并重构剧本底层，支持多题材无缝切换。

## 2. 终极系统特性
- **本地+云端大模型混合驱动 (AI API 接入)**：
  - **设置界面**：新增“AI 模型配置”面板，支持玩家填入各大 AI 公司（如 DeepSeek, OpenAI, 智谱等）的 API Key 和 Base URL。
  - **动态剧情生成**：在传统的预设 JSON 节点之外，新增特殊的 `[AI_Node]`。当玩家到达此类节点时，引擎将当前玩家的属性、背包、历史关键抉择打包发送给玩家配置的 API，实时生成不可预知的剧情分支和文本。
- **多维度混合题材架构 (多元宇宙剧本)**：
  - 彻底抛弃单一题材（纯奇幻/纯科幻）的限制。
  - **世界线跃迁机制**：在剧本底层架构中引入“世界线标签”（如 `Cyberpunk`, `Cultivation`, `Cthulhu`）。玩家的抉择或特定道具的触发，可以导致整个游戏场景和后续剧情库的底层题材发生跃迁（例如：从修仙世界突然坠入赛博朋克深渊）。
  - 文案主管需设计一套包容性极强的“万物互联”底层世界观，让题材间的转换逻辑自洽且震撼。

## 3. 期望的输出
请 P1 规划终极版本的架构蓝图：
1. 请 `P8_技术主管` 设计安全的 API 密钥本地存储方案，以及与大模型交互的网络请求模块 (Retrofit/OkHttp) 和流式输出 (SSE) 解析方案。
2. 请 `P8_文案主管` 制定“多元宇宙跳跃”的剧本架构大纲，并规范 `[AI_Node]` 的 Prompt 注入格式。
3. 请开始下发相关的可行性预研指令。
```
