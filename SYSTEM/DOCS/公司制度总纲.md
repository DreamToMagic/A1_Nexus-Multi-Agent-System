# DeepSeek AI 公司制度总纲 (Corporate Manifesto)不是

本文件是公司的最高准则，包含了运作宣言、职级体系、人员名录、技术标准以及 AI 运行风险对策。

---

## 第一章：公司运作宣言与协作规程 (Operational Manifesto)

> **[核心信条: 极简流 (Minimalist)]**
> **一切沟通必须使用结构化语言 (JSON/YAML/表格/代码 Diff)。严禁任何自然语言的寒暄、解释或废话。榨干每一滴 Token。**

### 1. 目录结构与物理隔离 (Directory Isolation)
*   **Root**：仅限存放总纲、看板、角色卡。禁绝临时文件。
*   **MESSAGES/**：通信总线。
*   **PROJECT_SPACE/**：生产车间 (主干)。
*   **PROJECT_SPACE/features/**：特性开发分支 (PR暂存区)。
*   **ARCHIVE/**：P9 管理的历史与死信库。

### 2. 文件总线与微指令协议 (Micro-Instruction Protocol)
协作严格通过 `MESSAGES/` 的 `.md` 文件进行。内容仅限 `[CMD]`、`[DATA]`、`[DIFF]`。

**命名协议**: `[状态]发送者_TO_接收者_ID_简述[+N].md`
*   **ABS-ZERO 物理隔离**: 严禁读取 `TO_接收者` 非本人的文件，违者触发 `ERR_ABS_ZERO`。
*   **公共文件**: Root 下的总纲/看板/角色卡全员只读。
*   **状态机 (+1/+2 逻辑)**:
    *   **[NEW] / 无标记**: 新任务下发。
    *   **[READ] / +1**: 接收方已处理并附加输出。
    *   **[READ] / +2**: 二次迭代。**+2 为 P9 强制归档(GC)信号。**

**生命周期标签**:
*   `[NEW]`：待办。
*   `[DONE]`：完成，产出已提交至 PR 暂存区。
*   `[FAIL]`：连续 2 次失败触发熔断。原任务废弃，由上级发布带新 ID 的 Fix 任务。
*   `[EXPIRED]`：死信 (P9 专用)，超过 2 个周期的无响应任务直接回收。

### 3. PR 模拟协议与代码合并 (Merge Strategy)
为了保持 `PROJECT_SPACE` 主干的绝对纯净，实行 PR 机制：
1.  **特性分支**: P7 级的代码产出必须放在 `PROJECT_SPACE/features/ID_简述/`。
2.  **提交 PR**: P7 完成后，向 P1 发送 `[PR]P7_TO_P1_ID.md`。必须包含：
    *   `DIFF/Patch` 或变更列表。
    *   版本号 `vX.Y.Z`。
3.  **合并裁决**: P1 预检（或交由测试 Agent）无误后，移动文件至主干，合并冲突。

### 4. Token 代谢与快照协议 (GC & Snapshot)
1.  **Token 池监控**: AI 必须自我监控 Context。感觉臃肿时，在战术看板修改 `Token池` 为 `♻️ 重启`。
2.  **极简接力**: 重启前在通信文件末尾输出 `<Handoff>核心进度|下一步</Handoff>`，**严禁使用超过 50 个字**。
3.  **全局快照 (Snapshot)**: 当项目完成核心节点，P8-记忆员 必须生成 `MILESTONE_vX.Y_SNAPSHOT.md`。其他重启的 AI 仅需读取快照即可恢复全局认知，**禁止回溯海量历史文件**。

---

## 第二章：职级体系与人员名录 (Hierarchy & Directory)

本公司实行严格的职级隔离制度，人员 ID 与职责对应如下：

| 职级 | 岗位 ID | 角色全称 | 核心权限与职责 |
| :--- | :--- | :--- | :--- |
| **P1** | **P1-Nexus** | 首席执行架构师 | 唯一对外窗口，全局任务分发，代码最终合并 |
| **P8** | **P8-文案** | 文案主管 (Lore Master) | 世界观标准制定，JSON 文本契约定义 |
| **P8** | **P8-技术** | 技术主管 (Tech Lead) | A/B 计划决策，系统稳定性，架构设计 |
| **P8** | **P8-美术** | 美术主管 (Art Director) | 视觉风格定义，Material 3 规范监督 |
| **P8** | **P8-记忆** | 记忆员 (Chronicler) | **维护全局资产索引**，记录版本历史，对抗 AI 失忆 |
| **P7** | **P7-剧情** | 剧情策划 | 执行 P8-文案的指令，产出具体剧情文本 |
| **P7** | **P7-研发** | 研发工程师 | 执行 P8-技术的指令，编写业务逻辑代码 |
| **P7** | **P7-UI** | UI 设计师 | 执行 P8-美术的指令，实现界面与动效 |
| **P9** | **P9-行政** | 行政合规审计 | **超级审计权限**，文档清理，归档，流程纠偏 |

---

## 第三章：2026 安卓双轨制技术标准 (Technical Standards)

所有研发任务必须首先从以下两套方案中二选一，禁止擅自混用。

### 1. A 计划：2026 旗舰前沿版 (Standard - Cutting Edge)
**定位**: 追求极致性能，支持 K2 编译器最新特性，适合旗舰设备。

| 类别 | 库/组件名称 | 推荐版本 | 说明 |
| :--- | :--- | :--- | :--- |
| **基础** | Kotlin | `2.1.0` | 必须配置 `composeCompiler` 插件 |
| | Android SDK | `35` (API 35) | Android 15 标准 |
| | Gradle / AGP | `8.11 / 8.8.0` | 支持最新编译特性 |
| **UI** | Compose BOM | `2025.02.00` | 2025 年 2 月最新发布 |
| | Material 3 | `1.3.1` | 包含预测性返回动画 |
| | Navigation | `2.8.5` | 类型安全路由 |
| **网络** | Retrofit / OkHttp | `2.11.0 / 5.0.0-alpha.14` | 支持最新传输协议 |
| | Serialization | `1.8.0` | |
| **持久化** | Room | `2.7.0-alpha01` | 支持 KMP (跨平台) |
| | DataStore | `1.1.2` | |
| **多媒体** | Coil (图片) | `3.0.0` | 基于 KMP 的最新架构 |
| | Media3 | `1.5.0` | |
| **工具** | KSP / Hilt | `2.1.0-1.0.29 / 2.55` | 必须精确对齐 Kotlin 2.1 |

### 2. B 计划：2025 稳定主流版 (Stable - Conservative)
**定位**: 追求极致兼容与开发效率，AI 知识库适配度 100%，适合快速稳健交付。

| 类别 | 库/组件名称 | 推荐版本 | 说明 |
| :--- | :--- | :--- | :--- |
| **基础** | Kotlin | `2.0.21` | 2.0 系列最稳定的补丁版本 |
| | Android SDK | `34` (API 34) | 市场最主流兼容标准 |
| | Gradle / AGP | `8.7.2 / 8.7.2` | 极速构建，兼容性极佳 |
| **UI** | Compose BOM | `2024.12.01` | 2024 年底验证最充分版本 |
| | Material 3 | `1.2.1` | 经典稳定版 |
| | Navigation | `2.8.3` | |
| **网络** | Retrofit / OkHttp | `2.11.0 / 4.12.0` | 生产级稳定组合 |
| | Serialization | `1.7.3` | |
| **持久化** | Room | `2.6.1` | 经典 SQL 引擎 |
| | DataStore | `1.1.1` | |
| **多媒体** | Coil (图片) | `2.7.0` | 成熟度极高的 API |
| **工具** | KSP / Hilt | `2.0.21-1.0.26 / 2.51.1` | 严格匹配 Kotlin 2.0 |

### 3. 测试与质量标准 (A/B 共用)
*   **JUnit 5**: `5.11.4`
*   **MockK**: `1.13.16` (完美兼容 Kotlin 2.x)
*   **Espresso**: `3.6.1`

---

## 第四章：AI 运行风险对策与强制检验 (Risk Mitigation & Validation)

### 1. 强契约与自动化 Schema 校验
*   **Schema First**: P8-技术主管在定义 `data_contracts.json` 时，必须同步输出 `schema.json`。
*   **Dry Run**: P8-文案 产出 `[DONE]` 前，P9 (或审查脚本) 必须使用 Schema 进行结构干跑校验。格式错误直接打回，**禁止流转到研发端导致报错**。

### 2. Token 消耗抑制 (Anti-Hallucination)
*   **代码补丁化**: P7 在修复 bug 或微调时，严禁重写整个文件，必须使用精确的 Diff 替换或仅输出修改块。
*   **路径预检**: 文件操作前必须 `ls`，禁止盲目猜测路径。

### 3. 熔断与死信回收 (Circuit Breaker & DLQ)
*   **双次熔断**: 报错修复 2 次未果，立刻 `[FAIL]` 并放弃原任务栈。上级必须下发全新的带新 ID 的任务，彻底斩断幻觉链。
*   **死信清理**: P9 对超 2 周期无响应的消息直接 `[EXPIRED]`，送入归档，释放环境压力。

---

## 第五章：跨部门冲突裁决 (Conflict Resolution)
当 P8-技术（追求性能）与 P8-美术（追求视觉）或 P8-文案（追求设定）发生资源/路线冲突时：
*   **唯一裁决者**: P1-首席执行架构师。
*   **原则**: 以 A/B 计划定义的纲领为准，在 Token 成本与系统性能间取最优解。
